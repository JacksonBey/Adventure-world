<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Player Movement</title>
    <style>
        body {
            margin: 0;
            overflow: hidden; /* Hide scrollbars */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh; /* Ensure full viewport height */
            background-color: #f0f0f0; /* Light gray background */
            font-family: 'Arial', sans-serif; /* Basic font */
        }
        canvas {
            border: 1px solid #000; /* Black border for the canvas */
            background-color: #fff; /* White background for the canvas */
            display: block; /* Remove extra space below canvas */
        }
        /* Removed .controls CSS as it's not used in this phase */
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>

    <script>
        // Get the canvas element from the HTML
        const canvas = document.getElementById('gameCanvas');
        // Get the 2D rendering context for the canvas
        const ctx = canvas.getContext('2d');

        // Player properties
        const player = {
            x: 0,          // Player's x position (will be calculated)
            y: 0,          // Player's y position (will be calculated)
            width: 50,     // Width of the player sprite
            height: 50,    // Height of the player sprite
            color: 'red', // Changed color for visibility
            speed: 5       // Movement speed of the player (pixels per frame)
        };

        // Object to keep track of pressed keys
        const keysPressed = {
            ArrowUp: false,
            ArrowDown: false,
            ArrowLeft: false,
            ArrowRight: false
            // Add WASD if needed:
            // w: false, a: false, s: false, d: false
        };

        /**
         * Handles keydown events to set the corresponding key state to true.
         * @param {KeyboardEvent} event - The keyboard event object.
         */
        function keyDownHandler(event) {
            if (event.key in keysPressed) {
                keysPressed[event.key] = true;
                event.preventDefault(); // Prevent default browser action for arrow keys (scrolling)
            }
        }

        /**
         * Handles keyup events to set the corresponding key state to false.
         * @param {KeyboardEvent} event - The keyboard event object.
         */
        function keyUpHandler(event) {
            if (event.key in keysPressed) {
                keysPressed[event.key] = false;
                event.preventDefault();
            }
        }

        /**
         * Updates the player's position based on currently pressed keys.
         * Also handles boundary collision to keep the player within the canvas.
         */
        function updatePlayerPosition() {
            // Move player based on pressed keys
            if (keysPressed.ArrowUp) {
                player.y -= player.speed;
            }
            if (keysPressed.ArrowDown) {
                player.y += player.speed;
            }
            if (keysPressed.ArrowLeft) {
                player.x -= player.speed;
            }
            if (keysPressed.ArrowRight) {
                player.x += player.speed;
            }

            // Boundary checks to keep player within canvas
            // Left boundary
            if (player.x < 0) {
                player.x = 0;
            }
            // Right boundary
            if (player.x + player.width > canvas.width) {
                player.x = canvas.width - player.width;
            }
            // Top boundary
            if (player.y < 0) {
                player.y = 0;
            }
            // Bottom boundary
            if (player.y + player.height > canvas.height) {
                player.y = canvas.height - player.height;
            }
        }

        /**
         * Function to draw the player sprite on the canvas.
         */
        function drawPlayer() {
            // Set the fill color for the player
            ctx.fillStyle = player.color;
            // Draw a filled rectangle for the player
            ctx.fillRect(player.x, player.y, player.width, player.height);
        }

        /**
         * Main game loop. Clears the canvas, updates game state, and redraws.
         */
        function gameLoop() {
            // Clear the entire canvas before drawing
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            updatePlayerPosition(); // Update player's state
            drawPlayer();           // Draw the player at the new position

            // Request the next frame to continue the loop
            requestAnimationFrame(gameLoop);
        }

        /**
         * Function to resize the canvas and re-center the player.
         * Called on initial load and when the window is resized.
         */
        function resizeCanvas() {
            // Set canvas dimensions (e.g., 80% of window size)
            canvas.width = window.innerWidth * 0.8;
            canvas.height = window.innerHeight * 0.8;

            // Recalculate player position to keep it centered initially or after resize
            // This ensures if the canvas shrinks, the player is not off-screen.
            // For more sophisticated handling, you might want to adjust based on current player pos.
            player.x = (canvas.width - player.width) / 2;
            player.y = (canvas.height - player.height) / 2;

            // No need to call drawPlayer() here, gameLoop will handle it.
            // However, if there was a noticeable flicker or delay, one could call it.
        }

        /**
         * Initialization function.
         * Sets up event listeners, initial canvas size, and starts the game loop.
         */
        function init() {
            // Add event listeners for key presses
            document.addEventListener('keydown', keyDownHandler);
            document.addEventListener('keyup', keyUpHandler);

            // Set initial canvas size and player position
            resizeCanvas();

            // Start the game loop
            gameLoop();

            // Add event listener for window resize
            window.addEventListener('resize', resizeCanvas);
        }

        // Call the init function when the window is fully loaded
        window.onload = init;
    </script>
</body>
</html>
